/*! g3 - v0.0.1 - 2015-08-28 - justinkheisler */
"use strict";(function(t){function i(){var t={};return t}function n(t,i,n){return d3.svg.axis().scale(t).innerTickSize(i).outerTickSize(3).tickPadding(5).orient(n)}"undefined"==typeof g3&&(t.g3=i()),g3.horizon=function(t,i,n){if(!n||!$.isArray(n))return"Param: data is missing, An array required";if(!i)return"Param: plot is missing, a div to attach the svg is required";var r={};return r.interpolate="basis",r.xInt=1,r.xMin=i.xDomain[0],r.yInt=1,r.yMin=i.yDomain[0],t&&(t.interpolate&&(r.interpolate=t.interpolate),t.xInt&&(r.xInt=t.xInt),t.xMin&&(r.xMin=t.xMin),t.yInt&&(r.yInt=t.yInt),t.yMin&&(r.yMin=t.yMin)),r.setInterpolate=function(t){return this.interpolate=t,this},r.setXMin=function(t){return this.xMin=t,this},r.draw=function(){var t=d3.svg.line().x(function(t,n){return i.xScale(n+r.xMin)}).y(function(t){return i.yScale(t/1e3)}).interpolate(this.interpolate);return this.svg=i.svg.append("svg:path").attr("d",t(n)).attr("stroke","blue").attr("stroke-width",2).attr("fill","none"),this},r.reDraw=function(){return this.svg.transition().duration(600).attr("d",lineFunc(n)),this},r},g3.log=function(t,i,n){if(!n||!$.isArray(n))return"Param: data is missing, An array required";if(!i)return"Param: plot is missing, a div to attach the svg is required";var r={};r.xInt=1,r.xMin=i.xDomain[0],r.yInt=1,r.yMin=i.yDomain[0],t&&(t.yInt&&(r.yInt=t.zInt),t.yMin&&(r.yMin=t.yMin),t.xInt&&(r.xInt=t.xInt),t.xMin&&(r.xMin=t.xMin)),r.setYInt=function(t){return this.yInt=t,this},r.setYMin=function(t){return this.yMin=t,this},r.setXInt=function(t){return this.xInt=t,this},r.setXMin=function(t){return this.xMin=t,this},r.setData=function(t){return this.data=t,this},r.draw=function(){return this.svg=i.svg.append("path").datum(n).attr("d",a).attr("stroke","blue").attr("stroke-width",.25).attr("fill","none"),this};var a=d3.svg.line().x(function(t){return i.xScale(t)}).y(function(t,n){return i.yScale(n*r.yInt+r.yMin)}).interpolate("basis");return r.reDraw=function(t){return this.svg.transition().duration(600).attr("d",a(t)),this},r},g3.plot=function(t,i){if(!i)return"Param: elem is missing. A div to attach to is required";var r={};return r.margin={top:50,right:10,bottom:30,left:30},r.width=$(i).width()-2*r.margin.left,r.height=800,r.xDomain=[0,0],r.yDomain=[0,0],r.elem=i,r.axisVisible=!0,t&&(t.margin&&(r.margin=t.margin),t.width&&(r.width=t.width),t.height&&(r.height=t.height),t.xDomain&&(r.xDomain=t.xDomain),t.yDomain&&(r.yDomain=t.yDomain)),r.setMargin=function(t,i,n,r){return this.margin={top:t,right:i,bottom:n,left:r},this},r.setWidth=function(t){return this.width=t,this},r.setHeight=function(t){return this.height=t,this},r.setXDomain=function(t){return this.xDomain=t,this},r.setYDomain=function(t){return this.yDomain=t,this},r.toggleAxis=function(t){return this.axisVisible=t,this},r.draw=function(){return this.xScale=d3.scale.linear().domain(this.xDomain).range([0,this.width]),this.yScale=d3.scale.linear().domain(this.yDomain).range([0,this.height]),this.xAxis=n(this.xScale,-this.height,"top"),this.yAxis=n(this.yScale,-this.width,"left"),this.svg=d3.select(i).append("svg").attr("class","log_plot").attr("width",this.width+this.margin.right+this.margin.left).attr("height",this.height+this.margin.bottom+this.margin.top).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.axisVisible||this.yAxis.tickFormat(""),this.svg.append("g").attr("class","x axis").call(this.xAxis),this.svg.append("g").attr("class","y axis").call(this.yAxis),this},r},g3.seismic=function(t,i,n){if(!n||!$.isArray(n))return"Param: data is missing, An array required";if(!i)return"Param: plot is missing, a div to attach the svg is required";var r={},a=13532;return r.color=d3.scale.linear().domain([-a,a]).range(["#000","#FFF"]),r.draw=function(){return this.canvas=d3.select(i.elem).append("canvas").attr("width",n.length).attr("height",n[0].length).style("width",i.width+i.margin.left+i.margin.right-2+"px").style("height",i.height+i.margin.bottom+8+"px").style("padding","19px").style("top",i.margin.top+"px").style("left",i.margin.left+"px").call(r.drawImage),this},r.drawImage=function(t){for(var i=t.node().getContext("2d"),a=i.createImageData(n.length,n[0].length),e=0,s=-1;n[0].length>e;++e)for(var h=0;n.length>h;++h){var o=d3.rgb(r.color(n[h][e]));a.data[++s]=o.r,a.data[++s]=o.g,a.data[++s]=o.b,a.data[++s]=255}return i.putImageData(a,0,0),this},r.setMax=function(t){return this.max=t,this},r},g3.wiggle=function(t,i,n){if(!n||!$.isArray(n))return"Param: data is missing, An array required";if(!i)return"Param: plot is missing, a div to attach the svg is required";var r={};r.skip=20,r.gain=20,r.xInt=1,r.xMin=i.xDomain[0],r.yInt=1,r.yMin=i.yDomain[0],t&&(t.skip&&(r.skip=t.skip),t.gain&&(r.gain=t.gain),t.xMin&&(r.xMin=t.xMin),t.xMin&&(r.xInt=t.xInt),t.yMin&&(r.yMin=t.yMin),t.yInt&&(r.yInt=t.yInt),t.max&&(r.max=t.max));var a=r.gain/r.max;return r.setSkip=function(t){return this.skip=t,this},r.setGain=function(t){return this.gain=t,this},r.setMax=function(t){return this.max=t,this},r.setXMin=function(t){return this.xMin=t,this},r.setYMin=function(t){return this.yMin=t,this},r.setXInt=function(t){return this.xInt=t,this},r.setYInt=function(t){return this.yInt=t,this},r.setFillColor=function(t){return this.fillColor=t,this},r.setColor=function(t){return this.color=t,this},r.setStrokeWidth=function(t){return this.strokeWidth=t,this},r.draw=function(){for(var t=n.length-1;t>=0;t--)if(0===this.skip||0===t%this.skip){var e=d3.mean(n[t]),s=d3.svg.area().interpolate("basis").x(function(n){return i.xScale(n*a+r.xMin+t)}).y(function(t,n){return i.yScale(n*r.yInt+r.yMin)}),h=d3.svg.area().interpolate("basis").x(function(){return i.xScale(e*a+r.xMin+t)}).y(function(t,n){return i.yScale(n*r.yInt+r.yMin)});i.svg.append("path").attr("class","line"+t).attr("d",s(n[t])).attr("stroke","black").attr("stroke-width",.25).attr("fill","none"),i.svg.datum(n[t]),i.svg.append("clipPath").attr("id","clip-below"+t).append("path").attr("d",h.x0(i.width)),i.svg.append("path").attr("class","area below").attr("clip-path","url(#clip-below"+t).attr("fill","black").attr("d",h.x0(function(n){return i.xScale(n*a+r.xMin+t)}))}return this},r.reDraw=function(){return this},r}})(window);